<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>HTML Page</title>
    </head>
    <body onload="init();">
        <h1>Hello World!</h1>
        
		<script type="text/javascript" src="assets/preloadjs-0.3.0.min.js"></script>
		<script type="text/javascript" src="soundjs/Sound.js"></script>
		<script type="text/javascript" src="soundjs/HTMLAudioPlugin.js"></script>
        
        <script>

		//Première Façon
		/*createjs.Sound.addEventListener("loadComplete", createjs.proxy(this.loadHandler, this));
		createjs.Sound.registerSound("assets/loopFight.wav", "sound");
		function loadHandler(event) {
			// This is fired for each sound that is registered.
			var instance = createjs.Sound.play("sound");  // play using id.  Could also use source.
			instance.addEventListener("playComplete", createjs.proxy(this.handleComplete, this));
			function handleComplete(event)
			{
				instance.play()
			}
		}*/
		
		//Deuxième Façon
        var manifest; // used to register sounds for preloading		 
		
        function init() {
            

            // begin loading content (only sounds to load)
			//canvas = document.getElementById("gameCanvas");
            var assetsPath = "assets/";
            manifest = [
                { id: "begin", src: assetsPath + "loopFight.wav" },
                { id: "music", src: assetsPath + "18-machinae_supremacy-lord_krutors_dominion.mp3" }
            ];
			
			preload = new createjs.LoadQueue();
			preload.installPlugin(createjs.Sound);
			preload.addEventListener("complete", loadMusic);
			
            preload.loadManifest(manifest);          
        }

		function loadMusic()
		{
			//Start Music
			//src, interrupt, delay, offset, loop(-1 for infinite), volume(%), pan(force du son pour les oreilles (négatif = gauche positif = droit))
			createjs.Sound.play("begin", createjs.Sound.INTERRUPT_NONE, 0, 0, -1, 1, 0);
			//createjs.Sound.play("begin", createjs.Sound.INTERRUPT_NONE, 0, 0, -1, 0.4);
		}    	

    </script>   
        
    </body>
</html>
